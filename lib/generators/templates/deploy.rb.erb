# config valid only for current version of Capistrano
lock '3.4.0'

set :branch, fetch(:branch, 'master')
set :application, "<%= app_name %>"
set :repository, "<%= `git ls-remote --get-url`.strip %>"
set :default_stage, "staging"

set :scm, "git"
set :scm_verbose, false

set :repo_url, fetch(:repository)
set :user, 'deploy'

set :deploy_via, :remote_cache
set :pty, true

set :ssh_options, { forward_agent: true }

require 'docker_houston/capistrano'

set :working_dir, "/home/deploy/dockerised_apps/<%= app_name %>"

